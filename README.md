# ğŸ“‹ åˆåŒç®¡ç†ç³»ç»Ÿ

<p align="center">
  <strong>Contract Management System</strong><br>
  è½»é‡çº§ã€å¯ç§æœ‰åŒ–éƒ¨ç½²çš„ä¼ä¸šåˆåŒç®¡ç†è§£å†³æ–¹æ¡ˆ
</p>

<p align="center">
  <img src="https://img.shields.io/badge/NestJS-10.0-red?logo=nestjs" alt="NestJS">
  <img src="https://img.shields.io/badge/React-18.2-blue?logo=react" alt="React">
  <img src="https://img.shields.io/badge/TypeScript-5.2-blue?logo=typescript" alt="TypeScript">
  <img src="https://img.shields.io/badge/Ant%20Design-5.12-blue?logo=antdesign" alt="Ant Design">
  <img src="https://img.shields.io/badge/SQLite-3-blue?logo=sqlite" alt="SQLite">
  <img src="https://img.shields.io/badge/Docker-Ready-blue?logo=docker" alt="Docker">
</p>

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ“ åˆåŒç®¡ç†
- **åˆåŒ CRUD**ï¼šå®Œæ•´çš„æ–°å»ºã€ç¼–è¾‘ã€åˆ é™¤ã€å½’æ¡£åŠŸèƒ½
- **é™„ä»¶ç®¡ç†**ï¼šæ”¯æŒå¤šé™„ä»¶ä¸Šä¼ ã€é¢„è§ˆå’Œä¸‹è½½
- **è‡ªå®šä¹‰å­—æ®µ**ï¼šç®¡ç†å‘˜å¯çµæ´»å®šä¹‰é¢å¤–å­—æ®µï¼ˆæ–‡æœ¬/æ•°å­—/æ—¥æœŸç±»å‹ï¼‰
- **åˆåŒæ ‡ç­¾**ï¼šæ”¯æŒè‡ªå®šä¹‰æ ‡ç­¾åˆ†ç±»å’Œç­›é€‰
- **æ‹–æ‹½æ’åº**ï¼šä½¿ç”¨ DnD Kit å®ç°åˆåŒåˆ—è¡¨æ‹–æ‹½æ’åº
- **é«˜çº§æœç´¢**ï¼šæ”¯æŒå¤šæ¡ä»¶ç»„åˆæœç´¢å’Œæ ‡ç­¾è¿‡æ»¤
- **æ‰¹é‡æ“ä½œ**ï¼šæ”¯æŒæ‰¹é‡å½’æ¡£ã€åˆ é™¤ç­‰æ“ä½œ
- **æ•°æ®å¯¼å…¥/å¯¼å‡º**ï¼šæ”¯æŒ Excel æ ¼å¼å¯¼å…¥å¯¼å‡º

### ğŸ”” æé†’ç³»ç»Ÿ
- **åˆ°æœŸæå‰æé†’**ï¼šå¯é…ç½®æå‰ N å¤©æé†’
- **è¿‡æœŸåæŒç»­æé†’**ï¼šè¿‡æœŸå T+N å¤©ç»§ç»­æé†’
- **é‡å¤æé†’æœºåˆ¶**ï¼šæœªå¤„ç†åˆåŒè‡ªåŠ¨é‡å¤æé†’
- **é‚®ä»¶æ¨é€**ï¼šé€šè¿‡ SMTP å‘é€æé†’é‚®ä»¶
- **ç³»ç»Ÿå†…é€šçŸ¥**ï¼šç™»å½•åé“ƒé“›å›¾æ ‡æ˜¾ç¤ºå¾…å¤„ç†äº‹é¡¹

### ğŸ‘¥ ç”¨æˆ·ä¸æƒé™
- **JWT èº«ä»½éªŒè¯**ï¼šå®‰å…¨çš„ç™»å½•è®¤è¯æœºåˆ¶
- **è§’è‰²ç®¡ç†**ï¼šç®¡ç†å‘˜å’Œæ™®é€šç”¨æˆ·ä¸¤ç§è§’è‰²
- **ä¸ªäººè®¾ç½®**ï¼šç”¨æˆ·å¯è‡ªå®šä¹‰å§“åã€å¤´åƒ
- **å¯†ç ç®¡ç†**ï¼šæ”¯æŒè‡ªåŠ©ä¿®æ”¹å¯†ç å’Œç®¡ç†å‘˜é‡ç½®å¯†ç 
- **åˆ—æ˜¾ç¤ºåå¥½**ï¼šæ¯ä¸ªç”¨æˆ·å¯ç‹¬ç«‹è®¾ç½®åˆ—è¡¨æ˜¾ç¤ºçš„åˆ—

### ğŸ“Š æ•°æ®å¯è§†åŒ–
- **ä»ªè¡¨ç›˜**ï¼šåˆåŒçŠ¶æ€ç»Ÿè®¡ã€å³å°†åˆ°æœŸç»Ÿè®¡
- **å›¾è¡¨å±•ç¤º**ï¼šä½¿ç”¨ Ant Design Charts å±•ç¤ºæ•°æ®è¶‹åŠ¿
- **çŠ¶æ€æ¦‚è§ˆ**ï¼šå¿«é€Ÿäº†è§£åˆåŒæ•´ä½“æƒ…å†µ

### ğŸ¨ ç•Œé¢ç‰¹æ€§
- **æ·±è‰²æ¨¡å¼**ï¼šæ”¯æŒæ˜/æš—ä¸»é¢˜åˆ‡æ¢
- **å“åº”å¼å¸ƒå±€**ï¼šé€‚é…ä¸åŒå±å¹•å°ºå¯¸
- **è™šæ‹Ÿæ»šåŠ¨**ï¼šå¤§æ•°æ®é‡ä¸‹æµç•…çš„è¡¨æ ¼æ»šåŠ¨
- **ä¸­æ–‡ç•Œé¢**ï¼šå®Œæ•´çš„ä¸­æ–‡æœ¬åœ°åŒ–æ”¯æŒ

### ğŸ“‹ å®¡è®¡æ—¥å¿—
- **æ“ä½œè®°å½•**ï¼šè®°å½•æ‰€æœ‰åˆåŒæ“ä½œï¼ˆåˆ›å»º/ä¿®æ”¹/åˆ é™¤ï¼‰
- **æ—¥å¿—è¯¦æƒ…**ï¼šè¯¦ç»†è®°å½•å˜æ›´å†…å®¹
- **ç”¨æˆ·è¿½è¸ª**ï¼šè®°å½•æ“ä½œè€…ä¿¡æ¯

---

## ğŸ›  æŠ€æœ¯æ ˆ

### åç«¯
| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| **NestJS** | 10.x | Node.js ä¼ä¸šçº§æ¡†æ¶ |
| **TypeScript** | 5.x | ç±»å‹å®‰å…¨ |
| **Prisma** | 5.7 | ç°ä»£åŒ– ORM |
| **SQLite** | 3 | è½»é‡çº§æ•°æ®åº“ |
| **Passport** | 0.7 | JWT èº«ä»½éªŒè¯ |
| **Nodemailer** | 6.9 | é‚®ä»¶å‘é€ |
| **ExcelJS** | 4.4 | Excel å¤„ç† |

### å‰ç«¯
| æŠ€æœ¯ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| **React** | 18.2 | UI æ¡†æ¶ |
| **TypeScript** | 5.x | ç±»å‹å®‰å…¨ |
| **Vite** | 5.x | æ„å»ºå·¥å…· |
| **Ant Design** | 5.12 | UI ç»„ä»¶åº“ |
| **React Query** | 5.90 | æ•°æ®è¯·æ±‚ç®¡ç† |
| **Zustand** | 4.4 | çŠ¶æ€ç®¡ç† |
| **React Router** | 6.21 | è·¯ç”±ç®¡ç† |
| **DnD Kit** | 6.3 | æ‹–æ‹½åŠŸèƒ½ |
| **Ant Design Charts** | 2.6 | å›¾è¡¨ç»„ä»¶ |

### éƒ¨ç½²
| æŠ€æœ¯ | è¯´æ˜ |
|------|------|
| **Docker** | å®¹å™¨åŒ–éƒ¨ç½² |
| **Docker Compose** | æœåŠ¡ç¼–æ’ |
| **Nginx** | å‰ç«¯æœåŠ¡ä¸åå‘ä»£ç† |
| **GitHub Actions** | CI/CD è‡ªåŠ¨åŒ– |

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
contract-manager/
â”œâ”€â”€ ğŸ“‚ backend/                 # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ ğŸ“‚ src/
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ auth/           # èº«ä»½éªŒè¯æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ users/          # ç”¨æˆ·ç®¡ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ contracts/      # åˆåŒç®¡ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ attachments/    # é™„ä»¶ç®¡ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ reminders/      # æé†’æœåŠ¡æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ settings/       # ç³»ç»Ÿè®¾ç½®æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ audit-logs/     # å®¡è®¡æ—¥å¿—æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ tags/           # æ ‡ç­¾ç®¡ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ prisma/         # Prisma æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ app.module.ts      # åº”ç”¨ä¸»æ¨¡å—
â”‚   â”‚   â””â”€â”€ main.ts            # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“‚ prisma/
â”‚   â”‚   â””â”€â”€ schema.prisma      # æ•°æ®åº“æ¨¡å‹å®šä¹‰
â”‚   â”œâ”€â”€ Dockerfile             # åç«¯å®¹å™¨é…ç½®
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ ğŸ“‚ frontend/                # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ ğŸ“‚ src/
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ components/     # å¯å¤ç”¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ MainLayout.tsx        # ä¸»å¸ƒå±€
â”‚   â”‚   â”‚   â”œâ”€â”€ ContractDrawer.tsx    # åˆåŒæŠ½å±‰
â”‚   â”‚   â”‚   â”œâ”€â”€ DashboardCharts.tsx   # å›¾è¡¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ DraggableTable.tsx    # æ‹–æ‹½è¡¨æ ¼
â”‚   â”‚   â”‚   â”œâ”€â”€ VirtualTable.tsx      # è™šæ‹Ÿæ»šåŠ¨è¡¨æ ¼
â”‚   â”‚   â”‚   â”œâ”€â”€ NotificationBell.tsx  # é€šçŸ¥é“ƒé“›
â”‚   â”‚   â”‚   â”œâ”€â”€ TagSelector.tsx       # æ ‡ç­¾é€‰æ‹©å™¨
â”‚   â”‚   â”‚   â””â”€â”€ ColumnSettings.tsx    # åˆ—è®¾ç½®
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ pages/          # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginPage.tsx         # ç™»å½•é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ DashboardPage.tsx     # åˆåŒåˆ—è¡¨é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ StatsDashboardPage.tsx # ç»Ÿè®¡ä»ªè¡¨ç›˜
â”‚   â”‚   â”‚   â”œâ”€â”€ SettingsPage.tsx      # ç³»ç»Ÿè®¾ç½®é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ AuditLogPage.tsx      # å®¡è®¡æ—¥å¿—é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ ProfilePage.tsx       # ä¸ªäººèµ„æ–™é¡µ
â”‚   â”‚   â”‚   â””â”€â”€ UserManagementPage.tsx # ç”¨æˆ·ç®¡ç†é¡µ
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ services/       # API æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ stores/         # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ types/          # ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ App.tsx            # åº”ç”¨å…¥å£
â”‚   â”‚   â””â”€â”€ main.tsx           # æ¸²æŸ“å…¥å£
â”‚   â”œâ”€â”€ Dockerfile             # å‰ç«¯å®¹å™¨é…ç½®
â”‚   â”œâ”€â”€ nginx.conf             # Nginx é…ç½®
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ ğŸ“‚ docs/                    # æ–‡æ¡£
â”‚   â”œâ”€â”€ kaifa.md               # å¼€å‘æ–‡æ¡£
â”‚   â””â”€â”€ æ„å»ºå‘½ä»¤.md             # æ„å»ºæŒ‡å—
â”‚
â”œâ”€â”€ ğŸ“‚ .github/workflows/       # GitHub Actions
â”‚   â””â”€â”€ deploy.yml             # CI/CD é…ç½®
â”‚
â”œâ”€â”€ docker-compose.yml          # Docker Compose é…ç½®
â”œâ”€â”€ startup.js                  # ä¸€é”®å¯åŠ¨è„šæœ¬
â””â”€â”€ README.md                   # é¡¹ç›®è¯´æ˜
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- **Node.js** >= 20.x
- **npm** >= 9.x
- **Docker** (å¯é€‰ï¼Œç”¨äºå®¹å™¨åŒ–éƒ¨ç½²)

### æ–¹å¼ä¸€ï¼šä¸€é”®å¯åŠ¨ï¼ˆå¼€å‘ç¯å¢ƒï¼‰

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd contract-manager

# ä¸€é”®å¯åŠ¨
node startup.js
```

å¯åŠ¨è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. å®‰è£…å‰åç«¯ä¾èµ–
2. ç”Ÿæˆ Prisma å®¢æˆ·ç«¯å¹¶åŒæ­¥æ•°æ®åº“
3. å¹¶è¡Œå¯åŠ¨å‰åç«¯å¼€å‘æœåŠ¡å™¨

å¯åŠ¨å®Œæˆåï¼š
- ğŸŒ **å‰ç«¯åœ°å€**: http://localhost:3000
- ğŸ”§ **åç«¯åœ°å€**: http://localhost:3001

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨å¯åŠ¨

```bash
# åç«¯
cd backend
npm install
npx prisma generate
npx prisma db push
npm run start:dev

# å‰ç«¯ï¼ˆæ–°ç»ˆç«¯ï¼‰
cd frontend
npm install
npm run dev
```

### æ–¹å¼ä¸‰ï¼šDocker éƒ¨ç½²ï¼ˆæœ¬åœ°æ„å»ºï¼‰

```bash
# æ„å»ºå¹¶å¯åŠ¨
docker compose up -d --build

# æŸ¥çœ‹æ—¥å¿—
docker compose logs -f

# åœæ­¢æœåŠ¡
docker compose down
```

### æ–¹å¼å››ï¼šä½¿ç”¨ GHCR é•œåƒéƒ¨ç½²ï¼ˆæ¨èï¼‰

é¡¹ç›®é€šè¿‡ GitHub Actions è‡ªåŠ¨æ„å»ºå¹¶æ¨é€é•œåƒåˆ° GitHub Container Registry (GHCR)ï¼Œå¯ç›´æ¥æ‹‰å–ä½¿ç”¨ï¼š

```bash
# ä½¿ç”¨ç”Ÿäº§ç¯å¢ƒé…ç½®
docker compose -f docker-compose.prod.yml up -d

# æŸ¥çœ‹æ—¥å¿—
docker compose -f docker-compose.prod.yml logs -f
```

---

## ğŸ“¦ Docker éƒ¨ç½²è¯´æ˜

### æœ¬åœ°æ„å»º (docker-compose.yml)

ç”¨äºå¼€å‘æˆ–æœ¬åœ°æ„å»ºé•œåƒï¼š

```yaml
version: '3.8'

services:
  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile
    container_name: contract-backend
    restart: unless-stopped
    environment:
      - NODE_ENV=production
      - PORT=3001
      - JWT_SECRET=${JWT_SECRET:-your-super-secret-key}
      - JWT_EXPIRES_IN=7d
      - DATABASE_URL=file:/app/db/contract.db
      - UPLOAD_DIR=/app/uploads
    volumes:
      - ./data/db:/app/db
      - ./data/uploads:/app/uploads
    networks:
      - contract-network

  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    container_name: contract-frontend
    restart: unless-stopped
    ports:
      - "3000:80"
    depends_on:
      - backend
    networks:
      - contract-network

networks:
  contract-network:
    driver: bridge
```

### ç”Ÿäº§ç¯å¢ƒ (docker-compose.prod.yml)

ä½¿ç”¨ GitHub Actions è‡ªåŠ¨æ„å»ºçš„ GHCR é•œåƒï¼Œæ— éœ€æœ¬åœ°æ„å»ºï¼š

```yaml
version: '3.8'

services:
  backend:
    image: ghcr.io/Asheblog/contract-backend:latest
    container_name: contract-backend
    restart: unless-stopped
    environment:
      - NODE_ENV=production
      - PORT=3001
      - JWT_SECRET=${JWT_SECRET:-è¯·ä¿®æ”¹ä¸ºå®‰å…¨çš„éšæœºå­—ç¬¦ä¸²}
      - JWT_EXPIRES_IN=7d
      - DATABASE_URL=file:/app/db/contract.db
      - UPLOAD_DIR=/app/uploads
    volumes:
      - ./data/db:/app/db
      - ./data/uploads:/app/uploads
    networks:
      - contract-network

  frontend:
    image: ghcr.io/Asheblog/contract-frontend:latest
    container_name: contract-frontend
    restart: unless-stopped
    ports:
      - "3888:80"
    depends_on:
      - backend
    networks:
      - contract-network

networks:
  contract-network:
    driver: bridge
```

> ğŸ“ **æ³¨æ„**ï¼šè¯·å°† `ä½ çš„githubç”¨æˆ·å` æ›¿æ¢ä¸ºå®é™…çš„ GitHub ç”¨æˆ·åï¼ˆå°å†™ï¼‰

### æ•°æ®æŒä¹…åŒ–

æ•°æ®å­˜å‚¨åœ¨ `./data` ç›®å½•ä¸‹ï¼š
- `./data/db/contract.db` - SQLite æ•°æ®åº“æ–‡ä»¶
- `./data/uploads/` - ä¸Šä¼ çš„åˆåŒé™„ä»¶

> ğŸ’¡ **å¤‡ä»½æç¤º**ï¼šåªéœ€å¤‡ä»½ `./data` ç›®å½•å³å¯å®Œæ•´å¤‡ä»½æ‰€æœ‰æ•°æ®ã€‚

### ç¯å¢ƒå˜é‡

| å˜é‡ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `JWT_SECRET` | JWT å¯†é’¥ | å¿…é¡»è®¾ç½® |
| `JWT_EXPIRES_IN` | Token è¿‡æœŸæ—¶é—´ | `7d` |
| `PORT` | åç«¯ç«¯å£ | `3001` |
| `DATABASE_URL` | æ•°æ®åº“è·¯å¾„ | `file:../db/contract.db` |
| `UPLOAD_DIR` | ä¸Šä¼ ç›®å½• | `/app/uploads` |
| `CORS_ORIGINS` | CORS å…è®¸æº | å…¨éƒ¨å…è®¸ |
| `DEFAULT_ADMIN_EMAIL` | é»˜è®¤ç®¡ç†å‘˜é‚®ç®± | `admin@example.com` |
| `DEFAULT_ADMIN_PASSWORD` | é»˜è®¤ç®¡ç†å‘˜å¯†ç  | `admin123` |
| `DEFAULT_ADMIN_NAME` | é»˜è®¤ç®¡ç†å‘˜å§“å | `ç³»ç»Ÿç®¡ç†å‘˜` |

> âš ï¸ **å®‰å…¨æç¤º**ï¼šç”Ÿäº§ç¯å¢ƒè¯·åŠ¡å¿…ä¿®æ”¹ `JWT_SECRET` ä¸ºå¼ºéšæœºå­—ç¬¦ä¸²ï¼

ç”Ÿæˆå®‰å…¨å¯†é’¥ï¼š
```bash
openssl rand -base64 32
```

---

## ğŸ”§ 1Panel éƒ¨ç½²ï¼ˆè¯¦ç»†æ­¥éª¤ï¼‰

1Panel æ˜¯ä¸€æ¬¾ç°ä»£åŒ–çš„ Linux æœåŠ¡å™¨è¿ç»´ç®¡ç†é¢æ¿ï¼Œä»¥ä¸‹æ˜¯è¯¦ç»†çš„éƒ¨ç½²æ­¥éª¤ï¼š

### å‰ç½®æ¡ä»¶

- å·²å®‰è£… 1Panel é¢æ¿
- æœåŠ¡å™¨å·²å®‰è£… Docker

### æ­¥éª¤ 1ï¼šåˆ›å»º Compose åº”ç”¨

1. ç™»å½• 1Panel é¢æ¿
2. è¿›å…¥ **å®¹å™¨** â†’ **Compose** â†’ **åˆ›å»º Compose**
3. å¡«å†™åº”ç”¨åç§°ï¼Œå¦‚ `contract-manager`
4. åœ¨ç¼–æ’å†…å®¹ä¸­ç²˜è´´ä¸Šé¢ç”Ÿäº§ç¯å¢ƒdockerç¼–æ’é…ç½®

> âš ï¸ **é‡è¦**ï¼š
> - å°† `ä½ çš„githubç”¨æˆ·å` æ›¿æ¢ä¸ºå®é™…çš„ GitHub ç”¨æˆ·åï¼ˆå°å†™ï¼‰
> - å°† `JWT_SECRET` æ›¿æ¢ä¸ºå®‰å…¨çš„éšæœºå­—ç¬¦ä¸²

5. ç‚¹å‡» **ç¡®è®¤** åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨

### æ­¥éª¤ 2ï¼šåˆ›å»ºç½‘ç«™ï¼ˆåå‘ä»£ç†ï¼‰

1. è¿›å…¥ **ç½‘ç«™** â†’ **ç½‘ç«™** â†’ **åˆ›å»ºç½‘ç«™**
2. é€‰æ‹© **åå‘ä»£ç†**
3. å¡«å†™é…ç½®ï¼š

| é…ç½®é¡¹ | å¡«å†™å†…å®¹ |
|--------|----------|
| **ä¸»åŸŸå** | ä½ çš„åŸŸåï¼Œå¦‚ `contract.example.com` |
| **ä»£ç†åœ°å€** | `127.0.0.1` |
| **ä»£ç†ç«¯å£** | `3000` |

4. ç‚¹å‡» **ç¡®è®¤** åˆ›å»ºç½‘ç«™

### æ­¥éª¤ 3ï¼šé…ç½® HTTPSï¼ˆå¯é€‰ä½†æ¨èï¼‰

1. åœ¨ç½‘ç«™åˆ—è¡¨ä¸­ç‚¹å‡»åˆšåˆ›å»ºçš„ç½‘ç«™
2. è¿›å…¥ **HTTPS** é€‰é¡¹å¡
3. ç”³è¯·æˆ–ä¸Šä¼  SSL è¯ä¹¦
4. å¼€å¯ **å¼ºåˆ¶ HTTPS**

### æ­¥éª¤ 4ï¼šéªŒè¯éƒ¨ç½²

è®¿é—®ä½ é…ç½®çš„åŸŸåï¼Œåº”è¯¥èƒ½çœ‹åˆ°åˆåŒç®¡ç†ç³»ç»Ÿçš„ç™»å½•é¡µé¢ã€‚

**é»˜è®¤ç®¡ç†å‘˜è´¦å·**ï¼š
- é‚®ç®±ï¼š`admin@example.com`
- å¯†ç ï¼š`admin123`

> âš ï¸ é¦–æ¬¡ç™»å½•åè¯·ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç ï¼

### ç½‘ç»œæ¶æ„è¯´æ˜

```
ç”¨æˆ·æµè§ˆå™¨
    â†“ HTTPS (443)
1Panel Nginx (åå‘ä»£ç†)
    â†“ HTTP (3000)
Frontend å®¹å™¨ (Nginx :80)
    â†“ /api/* è½¬å‘
Backend å®¹å™¨ (:3001)
    â†“
SQLite æ•°æ®åº“
```

### æ›´æ–°é•œåƒ

å½“ GitHub æœ‰æ–°çš„æäº¤æ—¶ï¼Œé•œåƒä¼šè‡ªåŠ¨æ„å»ºã€‚æ›´æ–°éƒ¨ç½²ï¼š

```bash
# åœ¨ Compose åº”ç”¨ç›®å½•ä¸‹æ‰§è¡Œ
docker compose pull
docker compose up -d
```

æˆ–åœ¨ 1Panel ä¸­ï¼š
1. è¿›å…¥ **å®¹å™¨** â†’ **Compose**
2. æ‰¾åˆ° `contract-manager` åº”ç”¨
3. ç‚¹å‡» **é‡å»º** æŒ‰é’®

è¯¦ç»†è¯´æ˜è¯·å‚è€ƒ [æ„å»ºå‘½ä»¤æ–‡æ¡£](./docs/æ„å»ºå‘½ä»¤.md)

---

## ğŸ”„ CI/CD

é¡¹ç›®é…ç½®äº† GitHub Actions è‡ªåŠ¨åŒ–æµç¨‹ï¼Œä½¿ç”¨ GitHub Container Registry (GHCR) å­˜å‚¨é•œåƒï¼š

### å·¥ä½œæµç¨‹

1. **è§¦å‘æ¡ä»¶**ï¼šæ¨é€åˆ° `main` åˆ†æ”¯æˆ–åˆ›å»º `v*` æ ‡ç­¾
2. **æ„å»ºæµç¨‹**ï¼š
   - æ„å»ºåç«¯ Docker é•œåƒ
   - æ„å»ºå‰ç«¯ Docker é•œåƒ
   - è‡ªåŠ¨æ¨é€è‡³ GHCR (`ghcr.io`)
3. **é•œåƒåœ°å€**ï¼š
   - åç«¯ï¼š`ghcr.io/ä½ çš„ç”¨æˆ·å/contract-backend:latest`
   - å‰ç«¯ï¼š`ghcr.io/ä½ çš„ç”¨æˆ·å/contract-frontend:latest`

### æ— éœ€é…ç½® Secrets

ä½¿ç”¨ GHCR æ—¶ï¼ŒGitHub Actions ä¼šè‡ªåŠ¨ä½¿ç”¨ `GITHUB_TOKEN` è¿›è¡Œè®¤è¯ï¼Œ**æ— éœ€æ‰‹åŠ¨é…ç½®ä»»ä½• Secrets**ã€‚

### æ‰‹åŠ¨è§¦å‘æ„å»º

é™¤äº†æ¨é€ä»£ç è‡ªåŠ¨è§¦å‘å¤–ï¼Œä¹Ÿå¯ä»¥åœ¨ GitHub ä»“åº“é¡µé¢æ‰‹åŠ¨è§¦å‘ï¼š

1. è¿›å…¥ä»“åº“çš„ **Actions** é¡µé¢
2. é€‰æ‹© **Build and Push Images** å·¥ä½œæµ
3. ç‚¹å‡» **Run workflow**

---

## ğŸ“Š æ•°æ®åº“æ¨¡å‹

```prisma
model User {
  id              Int       @id @default(autoincrement())
  email           String    @unique
  password        String
  name            String
  avatar          String?
  role            String    @default("user")
  viewPreferences String?
  contracts       Contract[]
  logs            AuditLog[]
}

model Contract {
  id          Int          @id @default(autoincrement())
  name        String
  partner     String
  signDate    DateTime
  expireDate  DateTime
  status      String       @default("active")
  isProcessed Boolean      @default(false)
  customData  String       @default("{}")
  tags        String       @default("[]")
  sortOrder   Int          @default(0)
  attachments Attachment[]
  logs        AuditLog[]
}

model Tag {
  id    Int    @id @default(autoincrement())
  name  String @unique
  color String @default("#1890ff")
}

model Attachment {
  id         Int      @id @default(autoincrement())
  fileName   String
  filePath   String
  mimeType   String
  size       Int
  contractId Int
}

model AuditLog {
  id         Int      @id @default(autoincrement())
  action     String
  details    String
  contractId Int?
  userId     Int
}

model ContractField {
  id        Int     @id @default(autoincrement())
  key       String  @unique
  label     String
  type      String
  isVisible Boolean @default(true)
  order     Int     @default(0)
}

model SystemSetting {
  id    Int    @id @default(autoincrement())
  key   String @unique
  value String
}
```

---

## ğŸ”‘ é»˜è®¤è´¦å·

é¦–æ¬¡éƒ¨ç½²åï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºç®¡ç†å‘˜è´¦å·ã€‚æ‚¨å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è‡ªå®šä¹‰é»˜è®¤è´¦å·ä¿¡æ¯ï¼š

```bash
# åœ¨ .env æ–‡ä»¶ä¸­é…ç½®
DEFAULT_ADMIN_EMAIL=admin@example.com
DEFAULT_ADMIN_PASSWORD=admin123
DEFAULT_ADMIN_NAME=ç³»ç»Ÿç®¡ç†å‘˜
```

| ç¯å¢ƒå˜é‡ | è¯´æ˜ | é»˜è®¤å€¼ |
|----------|------|--------|
| `DEFAULT_ADMIN_EMAIL` | ç®¡ç†å‘˜ç™»å½•é‚®ç®± | `admin@example.com` |
| `DEFAULT_ADMIN_PASSWORD` | ç®¡ç†å‘˜ç™»å½•å¯†ç  | `admin123` |
| `DEFAULT_ADMIN_NAME` | ç®¡ç†å‘˜æ˜¾ç¤ºåç§° | `ç³»ç»Ÿç®¡ç†å‘˜` |

> âš ï¸ **å®‰å…¨æç¤º**ï¼š
> - é¦–æ¬¡éƒ¨ç½²å‰è¯·ä¿®æ”¹ `.env` ä¸­çš„é»˜è®¤è´¦å·ä¿¡æ¯ï¼
> - é¦–æ¬¡ç™»å½•åè¯·ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç ï¼

---

## ğŸ“– API æ¥å£

æ‰€æœ‰ API æ¥å£ä»¥ `/api` ä¸ºå‰ç¼€ï¼š

| æ¨¡å— | æ¥å£ | è¯´æ˜ |
|------|------|------|
| è®¤è¯ | `POST /api/auth/login` | ç”¨æˆ·ç™»å½• |
| è®¤è¯ | `POST /api/auth/register` | ç”¨æˆ·æ³¨å†Œ |
| ç”¨æˆ· | `GET /api/users/me` | è·å–å½“å‰ç”¨æˆ· |
| ç”¨æˆ· | `PATCH /api/users/me` | æ›´æ–°å½“å‰ç”¨æˆ· |
| åˆåŒ | `GET /api/contracts` | åˆåŒåˆ—è¡¨ |
| åˆåŒ | `POST /api/contracts` | åˆ›å»ºåˆåŒ |
| åˆåŒ | `PATCH /api/contracts/:id` | æ›´æ–°åˆåŒ |
| åˆåŒ | `DELETE /api/contracts/:id` | åˆ é™¤åˆåŒ |
| é™„ä»¶ | `POST /api/attachments` | ä¸Šä¼ é™„ä»¶ |
| é™„ä»¶ | `GET /api/attachments/:id` | ä¸‹è½½é™„ä»¶ |
| æ ‡ç­¾ | `GET /api/tags` | æ ‡ç­¾åˆ—è¡¨ |
| è®¾ç½® | `GET /api/settings` | è·å–ç³»ç»Ÿè®¾ç½® |
| æ—¥å¿— | `GET /api/audit-logs` | å®¡è®¡æ—¥å¿—åˆ—è¡¨ |

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æäº¤ Pull Request

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿æäº¤ Issue æˆ– Pull Requestã€‚

---

<p align="center">
  Made with â¤ï¸ for Contract Management
</p>
